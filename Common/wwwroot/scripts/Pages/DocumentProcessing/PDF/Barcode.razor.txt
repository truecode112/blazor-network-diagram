@page "/pdf/barcode"
@inject Microsoft.JSInterop.IJSRuntime JS
@using System.IO
@inject HttpClient Http
@using Syncfusion.Blazor.Buttons
@inherits SampleBaseComponent;
@*Hidden:Lines*@

@using BlazorDemos.Data.FileFormats.PDF

@*End:Hidden*@
@*Hidden:Lines*@
@inject NavigationManager NavigationManager
<PageTitle>Blazor PDF Library - Barcode Example - Syncfusion Demos</PageTitle>
<HeadContent>
    <meta name="description" content="This sample demonstrates the creation of barcode in the PDF document and does not requires barcode font for creating barcode.It supports both 1D and 2D barcode with many customizing properties." />
    <link rel="canonical" href="@canonicalURL" />
</HeadContent>
@*End:Hidden*@

<SampleDescription>
   <p style="font-size:16px">This sample demonstrates the creation of barcode in the PDF document and does not requires barcode font for creating barcode. It supports both 1D and 2D barcode with many customizing properties.</p>  
</SampleDescription>
<ActionDescription>
   <p style="font-size:16px">This feature can be used in invoice, super markets, health care systems and more. More information about the barcode can be found in this documentation <a target='_blank' href='https://help.syncfusion.com/file-formats/pdf/working-with-barcode'>section.</a></p>
</ActionDescription>

<div class="control-section">
    <p style="font-size:16px">Click the button to view a PDF document generated by Essential PDF. Please note that Adobe Reader or its equivalent is required to view the resultant document. </p>

    <div class="button-section">
        <div id="button-control">
            <div class="row">
                <div>
                    <SfButton @onclick="GeneratePDF">Draw Barcode</SfButton>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .radio-control {
        margin: 0 0 5% 0;
    }

    .control-section .row {
        margin: 10px 0;
    }
</style>

@code {

     
    //Hidden:Lines
    private string canonicalURL { get; set; }

    protected override void OnInitialized()
    {
        canonicalURL = NavigationManager.Uri.Split("?")[0];
    }
    //End:Hidden
    /// <summary>
    /// Create and download the simple PDF document
    ///<summary>
    protected async void GeneratePDF(MouseEventArgs args)
    {        

        Dictionary<string, MemoryStream> fileData = new Dictionary<string, MemoryStream>();
        string fileDataPath = NavigationManager.BaseUri + SampleService.WebAssetsPath;
        byte[] data = await Http.GetByteArrayAsync(fileDataPath + "images/pdf/qrcodelogo.png"); fileData.Add("qrcodelogo.png", new MemoryStream(data));
        BarcodeService service = new BarcodeService(fileData);
        MemoryStream documentStream = service.CreateBarcode();
        service.Close();
        await JS.SaveAs("Barcode.pdf", documentStream.ToArray());
    }
}
